<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<title>Pro Multi Pair RR Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<style>
:root {
  --gold-dark: #6b5200;
  --gold-mid: #c7a420;
  --gold-light: #ffe17b;
  --neon-blue: #00f6ff;
  --font-main: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  font-family: var(--font-main);
  display: flex; justify-content: center; align-items: flex-start;
  padding: 20px;
  min-height: 100vh;
  transition: background 0.5s ease, color 0.5s ease;
}

/* --- MAIN CARD --- */
.card {
  width: 100%;
  max-width: 650px; /* Sedikit lebih ramping agar fokus */
  border-radius: 20px;
  padding: 30px;
  transition: all 0.5s ease;
  animation: fadeIn 0.6s ease-out;
  position: relative;
  overflow: hidden;
}

@keyframes fadeIn { from { opacity:0; transform:translateY(15px); } to { opacity:1; transform:none; } }
@keyframes glowPulse { 0% { box-shadow:0 0 0px rgba(255,215,0,0); } 50% { box-shadow:0 0 15px rgba(255,215,0,0.6); } 100% { box-shadow:0 0 0px rgba(255,215,0,0); } }

h1 {
  text-align: center;
  font-size: 24px;
  font-weight: 800;
  text-transform: uppercase;
  margin: 0 0 20px 0;
  letter-spacing: 1px;
}

/* --- LAYOUT GRID RESPONSIF --- */
.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 16px;
}

.box { display: flex; flex-direction: column; }

label {
  font-size: 13px;
  margin-bottom: 6px;
  font-weight: 500;
  opacity: 0.9;
  padding-left: 2px;
}

/* --- INPUTS & BUTTONS --- */
.form-field {
  width: 100%;
  padding: 12px 14px; /* Padding lebih besar untuk touch friendly */
  border-radius: 12px;
  border: 1px solid #aaa;
  font-size: 16px; /* Font size 16px mencegah zoom otomatis di iOS */
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  appearance: none; /* Menghapus style default browser */
}

.form-field:focus { outline: none; transform: translateY(-1px); }

.form-field[readonly] {
  font-weight: 700;
  cursor: default;
  pointer-events: none; /* Supaya tidak muncul keyboard di HP */
}

.highlight { animation: glowPulse 0.6s ease; }

button {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  font-size: 15px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex; align-items: center; justify-content: center; gap: 8px;
}
button:active { transform: scale(0.97); }

/* --- TABLE RESPONSIVE --- */
.table-responsive {
  width: 100%;
  overflow-x: auto; /* Scroll ke samping jika layar sempit */
  -webkit-overflow-scrolling: touch; /* Smooth scroll di iOS */
  margin-top: 20px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.1);
}

table { width: 100%; border-collapse: collapse; font-size: 14px; min-width: 350px; }
th, td { padding: 12px 10px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); white-space: nowrap; }
th { font-weight: 600; text-transform: uppercase; font-size: 12px; letter-spacing: 0.5px; opacity: 0.8; }
tr:last-child td { border-bottom: none; }

.badge {
  padding: 4px 8px; border-radius: 6px; font-weight: 700; font-size: 12px; display: inline-block;
  min-width: 50px;
}
.badge.success { color: #4ade80; background: rgba(74, 222, 128, 0.15); border: 1px solid rgba(74, 222, 128, 0.2); }
.badge.danger { color: #f87171; background: rgba(248, 113, 113, 0.15); border: 1px solid rgba(248, 113, 113, 0.2); }
.badge.info { color: #60a5fa; background: rgba(96, 165, 250, 0.15); }

.hint { font-size: 11px; margin-top: 4px; font-style: italic; text-align: right; opacity: 0.6; }
.theme-select { 
  padding: 8px 12px; border-radius: 10px; margin-bottom: 20px; font-weight: 600; font-size: 14px; 
  width: 100%; text-align: center; cursor: pointer;
  -webkit-appearance: none; appearance: none;
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23c7a420%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
  background-repeat: no-repeat; background-position: right 15px top 50%; background-size: 10px auto;
}

/* --- THEME SPECIFICS --- */
/* Gold */
body.gold { background: #0f0d05; color: #fdf3c0; }
body.gold .card { background: linear-gradient(145deg, #161308, #000); border: 1px solid #42350a; box-shadow: 0 8px 32px rgba(0,0,0,0.6); }
body.gold h1 { background: linear-gradient(to right, #ffe17b, #c7a420, #ffe17b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
body.gold .form-field { background: #131109; color: #ffeeba; border-color: #42350a; }
body.gold .form-field:focus { border-color: var(--gold-mid); box-shadow: 0 0 12px rgba(199, 164, 32, 0.25); }
body.gold .form-field[readonly] { background: #0a0904; border-color: #332805; color: #8a7738; }
body.gold button { background: linear-gradient(135deg, #c7a420, #967d1c); color: #000; box-shadow: 0 4px 15px rgba(199, 164, 32, 0.3); }
body.gold .theme-select { background-color: #131109; color: #c7a420; border: 1px solid #42350a; }

/* Neon */
body.neon { background: #050b14; color: #b8e8ff; }
body.neon .card { background: linear-gradient(145deg, #091624, #02050a); border: 1px solid #004e66; box-shadow: 0 0 30px rgba(0,246,255,0.08); }
body.neon h1 { color: #00f6ff; text-shadow: 0 0 15px rgba(0,246,255,0.4); }
body.neon .form-field { background: #06111a; color: #00f6ff; border-color: #004e66; }
body.neon .form-field:focus { border-color: #00f6ff; box-shadow: 0 0 15px rgba(0,246,255,0.25); }
body.neon .form-field[readonly] { background: #03080d; color: #006b8f; border-color: #003647; }
body.neon button { background: linear-gradient(135deg, #00f6ff, #0056b3); color: #fff; box-shadow: 0 0 20px rgba(0,246,255,0.3); }
body.neon .theme-select { background-color: #06111a; color: #00f6ff; border: 1px solid #004e66; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%2300f6ff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); }

/* Dark */
body.dark { background: #121212; color: #eee; }
body.dark .card { background: #1e1e1e; border: 1px solid #333; }
body.dark h1 { color: #fff; }
body.dark .form-field { background: #2d2d2d; border-color: #444; color: #fff; }
body.dark .form-field[readonly] { background: #181818; color: #888; }
body.dark button { background: #333; border: 1px solid #555; color: #fff; }
body.dark .theme-select { background: #2d2d2d; color: #fff; border: 1px solid #444; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); }

/* Light/BW */
body.bw { background: #f4f4f5; color: #18181b; }
body.bw .card { background: #fff; border: 1px solid #e4e4e7; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
body.bw h1 { color: #000; }
body.bw .form-field { background: #fff; border-color: #d4d4d8; color: #000; }
body.bw .form-field[readonly] { background: #f4f4f5; color: #71717a; }
body.bw button { background: #18181b; color: #fff; }
body.bw .theme-select { background: #fff; color: #000; border: 1px solid #d4d4d8; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E"); }


/* --- MOBILE MEDIA QUERY (The Magic) --- */
@media (max-width: 600px) {
  body { padding: 10px; }
  .card { padding: 20px 15px; border-width: 1px; }
  
  /* Stack grid menjadi 1 kolom */
  .grid-2 { grid-template-columns: 1fr; gap: 12px; margin-bottom: 12px; }
  
  h1 { font-size: 20px; margin-bottom: 15px; }
  label { font-size: 12px; }
  
  /* Tombol copy full width di paling bawah */
  .box-copy { grid-column: span 1; margin-top: 8px; }
  
  .form-field { font-size: 16px; padding: 10px 12px; }
  
  /* Sembunyikan hint jika terlalu sempit, atau buat lebih kecil */
  .hint { text-align: left; }
}
</style>
</head>
<body class="gold">

<div class="card">
  <select id="theme" class="theme-select">
    <option value="gold">‚ú® Theme: Gold Luxury</option>
    <option value="neon">üíé Theme: Cyber Neon</option>
    <option value="dark">üåë Theme: Midnight</option>
    <option value="bw">üìù Theme: Clean Paper</option>
  </select>

  <h1>RR Calculator</h1>

  <div class="grid-2">
    <div class="box">
      <label>Pair</label>
      <select id="pair" class="form-field">
        <option value="XAUUSD" selected>XAU/USD (Gold)</option>
        <option value="EURUSD">EUR/USD</option>
        <option value="GBPUSD">GBP/USD</option>
        <option value="NZDUSD">NZD/USD</option>
        <option value="AUDUSD">AUD/USD</option>
        <option value="USDCAD">USD/CAD</option>
        <option value="USDCHF">USD/CHF</option>
        <option value="USDJPY">USD/JPY</option>
        <option value="EURJPY">EUR/JPY</option>
        <option value="GBPJPY">GBP/JPY</option>
        <option value="AUDJPY">AUD/JPY</option>
        <option value="CADJPY">CAD/JPY</option>
        <option value="NZDJPY">NZD/JPY</option>
        <option value="CHFJPY">CHF/JPY</option>
        <option value="EURGBP">EUR/GBP</option>
        <option value="EURNZD">EUR/NZD</option>
      </select>
    </div>
    <div class="box">
      <label>Risk : Reward</label>
      <select id="rr" class="form-field">
        <option value="1">1 : 1</option>
        <option value="1.5">1 : 1.5</option>
        <option value="2">1 : 2</option>
        <option value="2.5">1 : 2.5</option>
        <option value="3" selected>1 : 3</option>
        <option value="4">1 : 4</option>
        <option value="5">1 : 5</option>
      </select>
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Open Price (OP)</label>
      <input id="op" class="form-field" type="text" inputmode="decimal" placeholder="0.0000" />
      <div class="hint">Tap Enter/Return to update</div>
    </div>
    <div class="box">
      <label>Take Profit (TP)</label>
      <input id="tp" class="form-field" type="text" readonly />
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Reward (Pips)</label>
      <input id="tpPips" class="form-field" type="number" step="1" inputmode="numeric" />
    </div>
    <div class="box">
      <label>Stop Loss (SL)</label>
      <input id="slInfo" class="form-field" type="text" readonly value="Calculating..." style="font-size:14px;"/>
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Position</label>
      <select id="position" class="form-field">
        <option value="buy">BUY (Long)</option>
        <option value="sell">SELL (Short)</option>
      </select>
    </div>
    <div class="box box-copy" style="justify-content: flex-end;">
      <button id="copyBtn">
        <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
        Copy Signal
      </button>
    </div>
  </div>

  <div class="table-responsive">
    <table id="resultTable" style="display:none;">
      <thead>
        <tr><th>Pair</th><th>Side</th><th>Entry</th><th>TP</th><th>Reward</th><th>RR</th></tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const theme = document.getElementById('theme');
  // Load saved theme
  const savedTheme = localStorage.getItem('rr-theme') || 'gold';
  document.body.className = savedTheme;
  theme.value = savedTheme;

  // Theme Switcher Logic
  theme.addEventListener('change', () => {
    document.body.style.opacity = '0.7';
    setTimeout(() => {
      document.body.className = theme.value;
      localStorage.setItem('rr-theme', theme.value);
      document.body.style.opacity = '1';
    }, 150);
  });

  // DOM Elements
  const els = {
    pair: document.getElementById('pair'),
    op: document.getElementById('op'),
    tp: document.getElementById('tp'),
    tpPips: document.getElementById('tpPips'),
    pos: document.getElementById('position'),
    rr: document.getElementById('rr'),
    sl: document.getElementById('slInfo'),
    tbody: document.getElementById('tableBody'),
    table: document.getElementById('resultTable'),
    copy: document.getElementById('copyBtn')
  };

  // Data
  const DUMMY = {
    XAUUSD:{op:2350.50, tp:2360.50},
    EURUSD:{op:1.0850, tp:1.0880},
    GBPUSD:{op:1.2650, tp:1.2680},
    AUDUSD:{op:0.6650, tp:0.6680},
    NZDUSD:{op:0.6200, tp:0.6230},
    USDJPY:{op:155.50, tp:155.80},
    EURGBP:{op:0.8550, tp:0.8580},
    USDCHF:{op:0.9100, tp:0.9130},
    USDCAD:{op:1.3650, tp:1.3680},
    AUDJPY:{op:103.50, tp:103.80},
    CADJPY:{op:114.20, tp:114.50},
    NZDJPY:{op:96.50, tp:96.80},
    CHFJPY:{op:170.50, tp:170.80},
    EURJPY:{op:168.50, tp:168.80},
    GBPJPY:{op:196.50, tp:196.80},
    EURNZD:{op:1.7550, tp:1.7580}
  };
  
  const DEFAULT_PIPS = {
    XAUUSD:100, // Gold default pips
    JPY: 40,    // JPY pairs
    STD: 30     // Standard pairs
  };

  // Helpers
  const getPipVal = p => p === 'XAUUSD' ? 0.1 : (p.includes('JPY') ? 0.01 : 0.0001);
  const getDecimals = p => (p === 'XAUUSD' || p.includes('JPY')) ? 2 : 5;
  const fmt = (n, d) => isNaN(n) ? '' : n.toFixed(d).replace('.', ',');
  const getDefPips = p => p === 'XAUUSD' ? DEFAULT_PIPS.XAUUSD : (p.includes('JPY') ? DEFAULT_PIPS.JPY : DEFAULT_PIPS.STD);

  // Core Logic
  function update() {
    const pr = els.pair.value;
    const pv = getPipVal(pr);
    const d = getDecimals(pr);
    
    // Parse OP
    let rawOp = els.op.value.replace(',', '.');
    let OP = parseFloat(rawOp);
    if(isNaN(OP)) { OP = DUMMY[pr].op; } // Silent fallback for calculation, don't overwrite input while typing

    const pos = els.pos.value;
    const rrVal = parseFloat(els.rr.value) || 1;

    // Handle TP Pips (Reward)
    let pipsInput = parseInt(els.tpPips.value);
    if(isNaN(pipsInput) || pipsInput < 0) pipsInput = getDefPips(pr);
    // Don't overwrite input continuously to allow typing, only on blur/enter? 
    // For now we use the input value directly.

    // Calculate TP Price
    const TP = pos === 'buy' ? OP + (pipsInput * pv) : OP - (pipsInput * pv);
    els.tp.value = fmt(TP, d);

    // Calculate Risk (SL)
    const rewardPips = pipsInput;
    const riskPips = rewardPips / rrVal;
    
    // Round risk pips logic
    let displayRisk = riskPips >= 1 ? Math.round(riskPips) : parseFloat(riskPips.toFixed(2));
    
    // Calculate SL Price
    const SL = pos === 'buy' ? OP - (displayRisk * pv) : OP + (displayRisk * pv);

    // Update UI info
    els.sl.value = `${fmt(SL, d)} (Risk: ${displayRisk} pips)`;

    // Update Table
    els.tbody.innerHTML = `<tr>
      <td style="font-weight:700">${pr}</td>
      <td><span class="badge ${pos==='buy'?'success':'danger'}">${pos.toUpperCase()}</span></td>
      <td>${fmt(OP, d)}</td>
      <td style="color:var(--neon-blue)">${fmt(TP, d)}</td>
      <td><span class="badge info">+${rewardPips}</span></td>
      <td>1:${rrVal}</td>
    </tr>`;
    els.table.style.display = 'table';
  }

  // Events
  els.op.addEventListener('keydown', (e) => {
    if(e.key === 'Enter') {
      e.preventDefault();
      els.op.blur(); // Close keyboard on mobile
      let val = parseFloat(els.op.value.replace(',', '.'));
      if(isNaN(val)) els.op.value = fmt(DUMMY[els.pair.value].op, getDecimals(els.pair.value));
      else els.op.value = fmt(val, getDecimals(els.pair.value));
      update();
    }
  });

  els.pair.addEventListener('change', () => {
    const pr = els.pair.value;
    els.op.value = fmt(DUMMY[pr].op, getDecimals(pr));
    els.tpPips.value = getDefPips(pr);
    els.pos.value = (DUMMY[pr].tp > DUMMY[pr].op) ? 'buy' : 'sell';
    update();
  });

  [els.tpPips, els.rr, els.pos].forEach(el => el.addEventListener('input', update));
  
  // Initialize
  els.pair.dispatchEvent(new Event('change'));

  // Copy Function
  els.copy.addEventListener('click', () => {
    const pr = els.pair.value;
    const pos = els.pos.value.toUpperCase();
    const opVal = els.op.value;
    const tpVal = els.tp.value;
    const slVal = els.sl.value.split(' ')[0];
    const rrVal = els.rr.value;

    const txt = `${pos} ${pr}\nOP: ${opVal}\nSL: ${slVal}\nTP: ${tpVal}\n(RR 1:${rrVal})`;
    
    if(navigator.clipboard) {
      navigator.clipboard.writeText(txt).then(() => {
        const orig = els.copy.innerHTML;
        els.copy.innerHTML = "‚úÖ COPIED!";
        els.copy.style.background = "#4ade80";
        els.copy.style.color = "#000";
        setTimeout(() => {
          els.copy.innerHTML = orig;
          els.copy.style.background = ""; 
          els.copy.style.color = ""; 
        }, 1500);
      });
    } else {
      alert("Copy:\n" + txt);
    }
  });
});
</script>
</body>
</html>
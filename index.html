<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<title>Pro Multi Pair RR Calculator - v2.8</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<style>
:root {
  --gold-dark: #6b5200; --gold-mid: #c7a420; --gold-light: #ffe17b;
  --neon-blue: #00f6ff; --font-main: 'Poppins', sans-serif;
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0; font-family: var(--font-main); display: flex; justify-content: center;
  padding: 20px; min-height: 100vh; transition: all 0.5s ease;
}

.card {
  width: 100%; max-width: 650px; border-radius: 20px; padding: 30px;
  animation: fadeIn 0.6s ease-out; position: relative; overflow: hidden;
  transition: all 0.5s ease;
}

@keyframes fadeIn { from { opacity:0; transform:translateY(15px); } to { opacity:1; transform:none; } }

.header-group { text-align: center; margin-bottom: 25px; }
h1 { font-size: 26px; font-weight: 800; text-transform: uppercase; margin: 0; letter-spacing: 1px; }
.subtitle { font-size: 11px; opacity: 0.6; letter-spacing: 2px; text-transform: uppercase; margin-top: 4px; }

.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.box { display: flex; flex-direction: column; position: relative; }
label { font-size: 13px; margin-bottom: 6px; font-weight: 600; opacity: 1; }

/* STANDAR FORM FIELD */
.form-field {
  width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid #aaa;
  font-size: 16px; transition: all 0.3s; position: relative; z-index: 2;
}

/* --- ANIMATED SPECTRUM BORDER UNTUK OPEN PRICE --- */
.highlight-op {
  position: relative;
  padding: 3px; /* Jarak untuk border spectrum */
  background: linear-gradient(0deg, transparent, transparent);
  border-radius: 15px;
  overflow: hidden;
  display: flex; justify-content: center; align-items: center;
}

.highlight-op::before {
  content: '';
  position: absolute;
  width: 150%; height: 150%;
  background-image: conic-gradient(transparent, transparent, transparent, var(--gold-mid));
  animation: rotate 3s linear infinite;
  z-index: 0;
}

/* Penyesuaian warna spectrum berdasarkan tema (diatur di JS atau CSS spesifik) */
body.neon .highlight-op::before { background-image: conic-gradient(transparent, transparent, transparent, var(--neon-blue)); }

@keyframes rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.highlight-op .form-field {
  border: none !important;
  background: #000; /* Menutup bagian tengah agar border terlihat tipis */
}

/* READONLY STYLE (High Contrast) */
.form-field[readonly] {
  cursor: default; font-weight: 800; opacity: 1 !important;
}

button {
  width: 100%; padding: 14px; border: none; border-radius: 12px; cursor: pointer;
  font-weight: 700; text-transform: uppercase; display: flex; align-items: center; justify-content: center; gap: 8px;
}

.table-responsive {
  width: 100%; overflow-x: auto; margin-top: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);
}
table { width: 100%; border-collapse: collapse; font-size: 14px; min-width: 350px; }
th, td { padding: 12px 10px; text-align: center; border-bottom: 1px solid rgba(128,128,128,0.2); }

.badge { padding: 4px 8px; border-radius: 6px; font-weight: 700; font-size: 12px; }
.theme-select { padding: 10px; border-radius: 10px; margin-bottom: 20px; width: 100%; cursor: pointer; font-weight: 600; }
.copyright { margin-top: 25px; text-align: center; font-size: 10px; opacity: 0.5; }

/* --- THEMES CONFIG --- */
body.gold { background: #0f0d05; color: #fdf3c0; }
body.gold .card { background: linear-gradient(145deg, #161308, #000); border: 1px solid #42350a; }
body.gold h1 { background: linear-gradient(to right, #ffe17b, #c7a420, #ffe17b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
body.gold .form-field { background: #131109; color: #ffeeba; border-color: #42350a; }
body.gold .highlight-op .form-field { background: #0a0904; }
body.gold .form-field[readonly] { background: #2a2510; color: #fff; border-color: var(--gold-mid); }
body.gold button { background: linear-gradient(135deg, #c7a420, #967d1c); color: #000; }

body.neon { background: #050b14; color: #b8e8ff; }
body.neon .card { background: linear-gradient(145deg, #091624, #02050a); border: 1px solid #004e66; }
body.neon h1 { color: #00f6ff; text-shadow: 0 0 15px rgba(0,246,255,0.4); }
body.neon .form-field { background: #06111a; color: #00f6ff; border-color: #004e66; }
body.neon .highlight-op .form-field { background: #02050a; }
body.neon .form-field[readonly] { background: #002233; color: #fff; border-color: #00f6ff; }
body.neon button { background: linear-gradient(135deg, #00f6ff, #0056b3); color: #fff; }

body.dark { background: #121212; color: #eee; }
body.dark .card { background: #1e1e1e; border: 1px solid #333; }
body.dark .form-field { background: #2d2d2d; border-color: #444; color: #fff; }
body.dark .highlight-op::before { background-image: conic-gradient(transparent, transparent, transparent, #fff); }
body.dark .form-field[readonly] { background: #000; color: #4ade80; border-color: #444; }
body.dark button { background: #333; border: 1px solid #555; color: #fff; }

body.bw { background: #f4f4f5; color: #18181b; }
body.bw .card { background: #fff; border: 1px solid #e4e4e7; }
body.bw .form-field { background: #fff; border-color: #d4d4d8; color: #000; }
body.bw .highlight-op::before { background-image: conic-gradient(transparent, transparent, transparent, #000); }
body.bw .form-field[readonly] { background: #18181b; color: #fff; border-color: #000; }
body.bw button { background: #18181b; color: #fff; }

@media (max-width: 600px) {
  body { padding: 10px; }
  .grid-2 { grid-template-columns: 1fr; gap: 12px; }
}
</style>
</head>
<body class="gold">

<div class="card">
  <select id="theme" class="theme-select">
    <option value="gold">‚ú® Theme: Gold Luxury</option>
    <option value="neon">üíé Theme: Cyber Neon</option>
    <option value="dark">üåë Theme: Midnight</option>
    <option value="bw">üìù Theme: Clean Paper</option>
  </select>

  <div class="header-group">
    <h1>RR Calculator</h1>
    <div class="subtitle">Version 2.8 ‚Ä¢ Spectrum Border Highlight</div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Pair Selection</label>
      <select id="pair" class="form-field">
        <optgroup label="Group 1">
          <option value="AUDUSD">#1 AUD/USD</option>
          <option value="EURGBP">#2 EUR/GBP</option>
          <option value="NZDUSD">#3 NZD/USD</option>
          <option value="USDCHF">#4 USD/CHF</option>
        </optgroup>
        <optgroup label="Group 2">
          <option value="AUDJPY">#1 AUD/JPY</option>
          <option value="CADJPY">#2 CAD/JPY</option>
          <option value="EURUSD">#3 EUR/USD</option>
          <option value="GBPUSD">#4 GBP/USD</option>
          <option value="NZDJPY">#5 NZD/JPY</option>
          <option value="USDCAD">#6 USD/CAD</option>
        </optgroup>
        <optgroup label="Group 3">
          <option value="CHFJPY">#1 CHF/JPY</option>
          <option value="EURJPY">#2 EUR/JPY</option>
          <option value="EURNZD">#3 EUR/NZD</option>
          <option value="GBPJPY">#4 GBP/JPY</option>
          <option value="USDJPY">#5 USD/JPY</option>
        </optgroup>
        <optgroup label="Default">
          <option value="XAUUSD" selected>#1 XAU/USD (Gold)</option>
        </optgroup>
      </select>
    </div>
    <div class="box">
      <label>Risk : Reward</label>
      <select id="rr" class="form-field">
        <option value="1">1 : 1</option>
        <option value="2">1 : 2</option>
        <option value="3" selected>1 : 3</option>
        <option value="4">1 : 4</option>
        <option value="5">1 : 5</option>
      </select>
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Open Price (OP)</label>
      <div class="highlight-op">
        <input id="op" class="form-field" type="text" inputmode="decimal" value="4000.00" />
      </div>
    </div>
    <div class="box">
      <label>Take Profit (TP) - Output</label>
      <input id="tp" class="form-field" type="text" readonly />
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Reward (Pips)</label>
      <input id="tpPips" class="form-field" type="text" inputmode="numeric" value="150" />
    </div>
    <div class="box">
      <label>Stop Loss (SL) - Output</label>
      <input id="slInfo" class="form-field" type="text" readonly />
    </div>
  </div>

  <div class="grid-2">
    <div class="box">
      <label>Position</label>
      <select id="position" class="form-field">
        <option value="buy">BUY (Long)</option>
        <option value="sell">SELL (Short)</option>
      </select>
    </div>
    <div class="box" style="justify-content: flex-end;">
      <button id="copyBtn">Copy Signal</button>
    </div>
  </div>

  <div class="table-responsive">
    <table id="resultTable" style="display:none;">
      <thead>
        <tr><th>Pair</th><th>Side</th><th>Entry</th><th>TP</th><th>Reward</th><th>RR</th></tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="copyright">&copy; by forexemas - 087777788565</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const themeSelect = document.getElementById('theme');
  const savedTheme = localStorage.getItem('rr-theme') || 'gold';
  document.body.className = savedTheme;
  themeSelect.value = savedTheme;

  themeSelect.addEventListener('change', () => {
    document.body.className = themeSelect.value;
    localStorage.setItem('rr-theme', themeSelect.value);
  });

  const els = {
    pair: document.getElementById('pair'),
    op: document.getElementById('op'),
    tp: document.getElementById('tp'),
    tpPips: document.getElementById('tpPips'),
    pos: document.getElementById('position'),
    rr: document.getElementById('rr'),
    sl: document.getElementById('slInfo'),
    tbody: document.getElementById('tableBody'),
    table: document.getElementById('resultTable'),
    copy: document.getElementById('copyBtn')
  };

  const PAIR_DEFAULTS = {
    XAUUSD: 4000.00, AUDUSD: 0.65000, EURGBP: 0.85000, NZDUSD: 0.61000, USDCHF: 0.88000,
    AUDJPY: 102.00, CADJPY: 112.00, EURUSD: 1.08000, GBPUSD: 1.26000, NZDJPY: 95.00,
    USDCAD: 1.36000, CHFJPY: 172.00, EURJPY: 165.00, EURNZD: 1.82000, GBPJPY: 195.00, USDJPY: 155.50
  };

  const getPipVal = p => (p === 'XAUUSD' ? 0.1 : (p.includes('JPY') ? 0.01 : 0.0001));
  const getDec = p => (p === 'XAUUSD' || p.includes('JPY')) ? 2 : 5;
  const fmt = (n, d) => isNaN(n) ? '' : n.toFixed(d);

  function update() {
    const pr = els.pair.value;
    const pv = getPipVal(pr);
    const d = getDec(pr);
    
    let cleanOp = els.op.value.replace(/[^0-9.,]/g, '').replace(',', '.');
    let OP = parseFloat(cleanOp);
    let cleanPips = els.tpPips.value.replace(/[^0-9]/g, '');
    let pipsInput = parseInt(cleanPips) || 0;

    if(isNaN(OP)) { els.table.style.display = 'none'; return; }

    const pos = els.pos.value;
    const rrVal = parseFloat(els.rr.value);
    
    const TP = pos === 'buy' ? OP + (pipsInput * pv) : OP - (pipsInput * pv);
    const riskPips = pipsInput / rrVal;
    let displayRisk = riskPips >= 1 ? Math.round(riskPips) : parseFloat(riskPips.toFixed(2));
    const SL = pos === 'buy' ? OP - (displayRisk * pv) : OP + (displayRisk * pv);

    els.tp.value = fmt(TP, d);
    els.sl.value = `${fmt(SL, d)} (${displayRisk} pips)`;

    els.tbody.innerHTML = `<tr>
      <td><b>${pr}</b></td>
      <td><span style="padding:4px 8px; border-radius:6px; font-weight:700; font-size:12px;" class="badge ${pos==='buy'?'success':'danger'}">${pos.toUpperCase()}</span></td>
      <td>${fmt(OP, d)}</td>
      <td style="color:var(--neon-blue); font-weight:700;">${fmt(TP, d)}</td>
      <td><span style="padding:4px 8px; border-radius:6px; font-weight:700; font-size:12px; color:#60a5fa; background:rgba(96,165,250,0.1);" class="badge info">+${pipsInput}</span></td>
      <td>1:${rrVal}</td>
    </tr>`;
    els.table.style.display = 'table';
  }

  [els.op, els.tpPips].forEach(input => {
    input.addEventListener('input', update);
  });

  els.pair.addEventListener('change', () => {
    const pr = els.pair.value;
    els.op.value = fmt(PAIR_DEFAULTS[pr], getDec(pr));
    update();
  });

  [els.rr, els.pos].forEach(el => el.addEventListener('change', update));
  
  update();

  els.copy.addEventListener('click', () => {
    const txt = `${els.pos.value.toUpperCase()} ${els.pair.value}\nOP: ${els.op.value}\nSL: ${els.sl.value.split(' ')[0]}\nTP: ${els.tp.value}\n(RR 1:${els.rr.value})`;
    if(navigator.clipboard) {
      navigator.clipboard.writeText(txt).then(() => {
        const b = els.copy; const orig = b.innerText; b.innerText = "COPIED!";
        setTimeout(() => b.innerText = orig, 1000);
      });
    }
  });
});
</script>
</body>
</html>
